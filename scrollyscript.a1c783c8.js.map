{"version":3,"sources":["scripts/scrollyscript.js"],"names":["initScrollyYears","y2002","d3","selectAll","y2007","y2016","y2023","y2024","allYears","resetYears","classed","showYear","selection","select","on","e","scroller","scrollama","setup","step","offset","debug","onStepEnter","element","direction","index","event","CustomEvent","detail","dispatchEvent","onStepExit","window","addEventListener","resize","document","readyState"],"mappings":";AAAA,SAASA,IAEDC,IAAAA,EAAQC,GAAGC,UAAU,gBACrBC,EAAQF,GAAGC,UAAU,gBACrBE,EAAQH,GAAGC,UAAU,gBACrBG,EAAQJ,GAAGC,UAAU,gBACrBI,EAAQL,GAAGC,UAAU,gBAGrBK,EAAWN,GAAGC,UAClB,wEAIOM,SAAAA,IACPD,EACGE,QAAQ,gBAAgB,GACxBA,QAAQ,iBAAiB,GAE5BR,GAAGC,UAAU,WACVO,QAAQ,eAAe,GACvBA,QAAQ,iBAAiB,GAIrBC,SAAAA,EAASC,GAEhBJ,EACGE,QAAQ,gBAAgB,GACxBA,QAAQ,iBAAiB,GAG5BE,EACGF,QAAQ,iBAAiB,GACzBA,QAAQ,gBAAgB,GAyB7BD,IAKAP,GAAGW,OAAO,cACPC,GAAG,SAAU,SAAUC,GACtBN,MAEDK,GAAG,UAAW,SAAUC,GACvBN,MAIJP,GAAGW,OAAO,aAAaC,GAAG,SAAU,SAAUC,GAlC5CJ,EAASV,KAsCXC,GAAGW,OAAO,aAAaC,GAAG,SAAU,SAAUC,GAlC5CJ,EAASP,KAsCXF,GAAGW,OAAO,cAAcC,GAAG,SAAU,SAAUC,GAlC7CJ,EAASN,KAsCXH,GAAGW,OAAO,eAAeC,GAAG,SAAU,SAAUC,GAlC9CJ,EAASL,KAsCXJ,GAAGW,OAAO,cAAcC,GAAG,SAAU,SAAUC,GAlC7CJ,EAASJ,KAuCLS,IAAAA,EAAWC,YAEjBD,EACGE,MAAM,CACLC,KAAM,kCACNC,OAAQ,GACRC,OAAO,IAERC,YAAY,SAAyC,GAA7BC,IAAAA,EAAAA,EAAAA,QAAgBC,GAAPC,EAAAA,MAAOD,EAAAA,WACjCE,EAAQ,IAAIC,YAAY,SAAU,CAAEC,OAAQ,CAAEJ,UAAAA,KACpDD,EAAQM,cAAcH,KAEvBI,WAAW,SAAyC,GAA7BP,IAAAA,EAAAA,EAAAA,QAAgBC,GAAPC,EAAAA,MAAOD,EAAAA,WAChCE,EAAQ,IAAIC,YAAY,UAAW,CAAEC,OAAQ,CAAEJ,UAAAA,KACrDD,EAAQM,cAAcH,KAG1BK,OAAOC,iBAAiB,SAAU,WAAMhB,OAAAA,EAASiB,WAIvB,YAAxBC,SAASC,WACXD,SAASF,iBAAiB,mBAAoBhC,GAE9CA","file":"scrollyscript.a1c783c8.js","sourceRoot":"../src","sourcesContent":["function initScrollyYears() {\n  // Grab all the year groups once\n  const y2002 = d3.selectAll(\".g-group2002\");\n  const y2007 = d3.selectAll(\".g-group2007\");\n  const y2016 = d3.selectAll(\".g-group2016\");\n  const y2023 = d3.selectAll(\".g-group2023\");\n  const y2024 = d3.selectAll(\".g-group2024\");\n\n  // A combined selection makes it easy to hide all\n  const allYears = d3.selectAll(\n    \".g-group2002, .g-group2007, .g-group2016, .g-group2023, .g-group2024\"\n  );\n\n  // Helper: hide all years (used for intro and transitions)\n  function resetYears() {\n    allYears\n      .classed(\"year-visible\", false)  // hides (opacity 0)\n      .classed(\"year-fade-out\", true); // optional, if you want a distinct class\n\n    d3.selectAll(\"#spacer\")\n      .classed(\"transparent\", true)\n      .classed(\"spacer_margin\", true);\n  }\n\n  // Helper: show only one year, smoothly\n  function showYear(selection) {\n    // fade others out\n    allYears\n      .classed(\"year-visible\", false)\n      .classed(\"year-fade-out\", true);\n\n    // fade this one in\n    selection\n      .classed(\"year-fade-out\", false)\n      .classed(\"year-visible\", true);\n  }\n\n  // Named wrappers (similar to top_three / paint / plumbing, etc.)\n  function show2002() {\n    showYear(y2002);\n  }\n\n  function show2007() {\n    showYear(y2007);\n  }\n\n  function show2016() {\n    showYear(y2016);\n  }\n\n  function show2023() {\n    showYear(y2023);\n  }\n\n  function show2024() {\n    showYear(y2024);\n  }\n\n  // Initial state: intro = nothing shown\n  resetYears();\n\n  /* Scrollytelling code (mirroring your majors pattern) */\n\n  // STEP ZERO: intro state, nothing visible\n  d3.select(\"#step-zero\")\n    .on(\"stepin\", function (e) {\n      resetYears();\n    })\n    .on(\"stepout\", function (e) {\n      resetYears();\n    });\n\n  // 2002 should appear at STEP ONE (fixes \"one step too soon\")\n  d3.select(\"#step-one\").on(\"stepin\", function (e) {\n    show2002();\n  });\n\n  d3.select(\"#step-two\").on(\"stepin\", function (e) {\n    show2007();\n  });\n\n  d3.select(\"#step-five\").on(\"stepin\", function (e) {\n    show2016();\n  });\n\n  d3.select(\"#step-seven\").on(\"stepin\", function (e) {\n    show2023();\n  });\n\n  d3.select(\"#step-nine\").on(\"stepin\", function (e) {\n    show2024();\n  });\n\n  // scrollama setup (same as your working example)\n  const scroller = scrollama();\n\n  scroller\n    .setup({\n      step: \"#scrolly .scrolly-overlay .step\",\n      offset: 0.5,\n      debug: false,\n    })\n    .onStepEnter(function ({ element, index, direction }) {\n      const event = new CustomEvent(\"stepin\", { detail: { direction } });\n      element.dispatchEvent(event);\n    })\n    .onStepExit(function ({ element, index, direction }) {\n      const event = new CustomEvent(\"stepout\", { detail: { direction } });\n      element.dispatchEvent(event);\n    });\n\n  window.addEventListener(\"resize\", () => scroller.resize());\n}\n\n// Robust init (good for Arc + local)\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", initScrollyYears);\n} else {\n  initScrollyYears();\n}\n"]}