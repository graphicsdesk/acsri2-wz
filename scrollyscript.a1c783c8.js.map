{"version":3,"sources":["scripts/scrollyscript.js"],"names":["initialized","resetYears","d3","selectAll","classed","showYear","selector","initScrollyYears","select","on","scroller","scrollama","setup","step","offset","debug","onStepEnter","element","direction","index","event","CustomEvent","detail","dispatchEvent","onStepExit","window","addEventListener","resize","tryInit","hasYearGroup","document","querySelector","hasStep","hasLibs","bootstrap","interval","setInterval","clearInterval","readyState"],"mappings":";CAAA,WACMA,IAAAA,GAAc,EAGTC,SAAAA,IACUC,GAAGC,UAClB,wEAICC,QAAQ,gBAAgB,GACxBA,QAAQ,iBAAiB,GAE5BF,GAAGC,UAAU,WACVC,QAAQ,eAAe,GACvBA,QAAQ,iBAAiB,GAIrBC,SAAAA,EAASC,GACCJ,GAAGC,UAClB,wEAICC,QAAQ,gBAAgB,GACxBA,QAAQ,iBAAiB,GAE5BF,GAAGC,UAAUG,GACVF,QAAQ,iBAAiB,GACzBA,QAAQ,gBAAgB,GAyBpBG,SAAAA,IACHP,IAAAA,EAAAA,CACJA,GAAc,EAGdC,IAGAC,GAAGM,OAAO,cACPC,GAAG,SAAU,WACZR,MAEDQ,GAAG,UAAW,WACbR,MAIJC,GAAGM,OAAO,aAAaC,GAAG,SAAU,WArCpCJ,EAAS,kBAyCTH,GAAGM,OAAO,aAAaC,GAAG,SAAU,WArCpCJ,EAAS,kBAyCTH,GAAGM,OAAO,cAAcC,GAAG,SAAU,WArCrCJ,EAAS,kBAyCTH,GAAGM,OAAO,eAAeC,GAAG,SAAU,WArCtCJ,EAAS,kBAyCTH,GAAGM,OAAO,cAAcC,GAAG,SAAU,WArCrCJ,EAAS,kBA0CHK,IAAAA,EAAWC,YAEjBD,EACGE,MAAM,CACLC,KAAM,kCACNC,OAAQ,GACRC,OAAO,IAERC,YAAY,SAAyC,GAA7BC,IAAAA,EAAAA,EAAAA,QAAgBC,GAAPC,EAAAA,MAAOD,EAAAA,WACjCE,EAAQ,IAAIC,YAAY,SAAU,CAAEC,OAAQ,CAAEJ,UAAAA,KACpDD,EAAQM,cAAcH,KAEvBI,WAAW,SAAyC,GAA7BP,IAAAA,EAAAA,EAAAA,QAAgBC,GAAPC,EAAAA,MAAOD,EAAAA,WAChCE,EAAQ,IAAIC,YAAY,UAAW,CAAEC,OAAQ,CAAEJ,UAAAA,KACrDD,EAAQM,cAAcH,KAG1BK,OAAOC,iBAAiB,SAAU,WAAMhB,OAAAA,EAASiB,YAI1CC,SAAAA,IACH5B,IAAAA,EAAAA,CAEE6B,IAAAA,EAAeC,SAASC,cAC5B,wEAEIC,EAAUF,SAASC,cAAc,mCAGjCE,EAAUR,OAAOvB,IAAMuB,OAAOd,UAEhCkB,GAAgBG,GAAWC,GAC7B1B,KAKK2B,SAAAA,IAEPN,IAGMO,IAAAA,EAAWC,YAAY,WACvBpC,EACFqC,cAAcF,GAEdP,KAED,KAGuB,YAAxBE,SAASQ,WACXR,SAASJ,iBAAiB,mBAAoBQ,GAE9CA,IApJJ","file":"scrollyscript.a1c783c8.js","sourceRoot":"../src","sourcesContent":["(function () {\n  let initialized = false;\n\n  // Helper: hide all year groups\n  function resetYears() {\n    const allYears = d3.selectAll(\n      \".g-group2002, .g-group2007, .g-group2016, .g-group2023, .g-group2024\"\n    );\n\n    allYears\n      .classed(\"year-visible\", false)\n      .classed(\"year-fade-out\", true);\n\n    d3.selectAll(\"#spacer\")\n      .classed(\"transparent\", true)\n      .classed(\"spacer_margin\", true);\n  }\n\n  // Helper: show only the given selector, hide others\n  function showYear(selector) {\n    const allYears = d3.selectAll(\n      \".g-group2002, .g-group2007, .g-group2016, .g-group2023, .g-group2024\"\n    );\n\n    allYears\n      .classed(\"year-visible\", false)\n      .classed(\"year-fade-out\", true);\n\n    d3.selectAll(selector)\n      .classed(\"year-fade-out\", false)\n      .classed(\"year-visible\", true);\n  }\n\n  // Named wrappers – same vibe as reset/top_three/paint/etc.\n  function show2002() {\n    showYear(\".g-group2002\");\n  }\n\n  function show2007() {\n    showYear(\".g-group2007\");\n  }\n\n  function show2016() {\n    showYear(\".g-group2016\");\n  }\n\n  function show2023() {\n    showYear(\".g-group2023\");\n  }\n\n  function show2024() {\n    showYear(\".g-group2024\");\n  }\n\n  // Main init – only called once, and only after SVG + steps exist\n  function initScrollyYears() {\n    if (initialized) return;\n    initialized = true;\n\n    // initial state: intro = no years\n    resetYears();\n\n    // STEP ZERO: intro (nothing visible)\n    d3.select(\"#step-zero\")\n      .on(\"stepin\", function () {\n        resetYears();\n      })\n      .on(\"stepout\", function () {\n        resetYears();\n      });\n\n    // 2002 starts at STEP ONE\n    d3.select(\"#step-one\").on(\"stepin\", function () {\n      show2002();\n    });\n\n    d3.select(\"#step-two\").on(\"stepin\", function () {\n      show2007();\n    });\n\n    d3.select(\"#step-five\").on(\"stepin\", function () {\n      show2016();\n    });\n\n    d3.select(\"#step-seven\").on(\"stepin\", function () {\n      show2023();\n    });\n\n    d3.select(\"#step-nine\").on(\"stepin\", function () {\n      show2024();\n    });\n\n    // scrollama setup (same pattern as your majors example)\n    const scroller = scrollama();\n\n    scroller\n      .setup({\n        step: \"#scrolly .scrolly-overlay .step\",\n        offset: 0.5,\n        debug: false,\n      })\n      .onStepEnter(function ({ element, index, direction }) {\n        const event = new CustomEvent(\"stepin\", { detail: { direction } });\n        element.dispatchEvent(event);\n      })\n      .onStepExit(function ({ element, index, direction }) {\n        const event = new CustomEvent(\"stepout\", { detail: { direction } });\n        element.dispatchEvent(event);\n      });\n\n    window.addEventListener(\"resize\", () => scroller.resize());\n  }\n\n  // Poll until Arc has actually injected SVG + steps\n  function tryInit() {\n    if (initialized) return;\n\n    const hasYearGroup = document.querySelector(\n      \".g-group2002, .g-group2007, .g-group2016, .g-group2023, .g-group2024\"\n    );\n    const hasStep = document.querySelector(\"#scrolly .scrolly-overlay .step\");\n\n    // also make sure d3 + scrollama are available\n    const hasLibs = window.d3 && window.scrollama;\n\n    if (hasYearGroup && hasStep && hasLibs) {\n      initScrollyYears();\n    }\n  }\n\n  // Start checking after DOM is at least loaded\n  function bootstrap() {\n    // try once immediately\n    tryInit();\n\n    // then keep checking until initialized\n    const interval = setInterval(function () {\n      if (initialized) {\n        clearInterval(interval);\n      } else {\n        tryInit();\n      }\n    }, 250); // 4x per second is plenty\n  }\n\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  } else {\n    bootstrap();\n  }\n})();\n"]}