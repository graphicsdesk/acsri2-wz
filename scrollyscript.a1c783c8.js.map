{"version":3,"sources":["scripts/scrollyscript.js"],"names":["document","addEventListener","setYearVisibility","visibleKeys","groups","y2002","d3","selectAll","y2007","y2016","y2023","y2024","Object","entries","forEach","key","selection","includes","style","transition","duration","on","select","classed","scroller","scrollama","setup","step","offset","debug","onStepEnter","element","direction","index","event","CustomEvent","detail","dispatchEvent","onStepExit","window","resize"],"mappings":"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","file":"scrollyscript.a1c783c8.js","sourceRoot":"../src","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n  function setYearVisibility(visibleKeys = []) {\n    const groups = {\n      y2002: d3.selectAll(\".g-group2002\"),\n      y2007: d3.selectAll(\".g-group2007\"),\n      y2016: d3.selectAll(\".g-group2016\"),\n      y2023: d3.selectAll(\".g-group2023\"),\n      y2024: d3.selectAll(\".g-group2024\"),\n    };\n\n    Object.entries(groups).forEach(([key, selection]) => {\n      const isVisible = visibleKeys.includes(key);\n\n      if (isVisible) {\n        selection\n          .style(\"display\", null)\n          .transition()\n          .duration(600)\n          .style(\"opacity\", 1);\n      } else {\n        selection\n          .transition()\n          .duration(600)\n          .style(\"opacity\", 0)\n          .on(\"end\", function () {\n            d3.select(this).style(\"display\", \"none\");\n          });\n      }\n    });\n\n    d3.selectAll(\"#spacer\")\n      .classed(\"transparent\", true)\n      .classed(\"spacer_margin\", true);\n  }\n\n  // Hide all at start\n  setYearVisibility([]);\n\n  d3.select(\"#step-zero\").on(\"stepin\", () => {\n    setYearVisibility([\"y2002\"]);\n  });\n\n  d3.select(\"#step-two\").on(\"stepin\", () => {\n    setYearVisibility([\"y2007\"]);\n  });\n\n  d3.select(\"#step-five\").on(\"stepin\", () => {\n    setYearVisibility([\"y2016\"]);\n  });\n\n  d3.select(\"#step-seven\").on(\"stepin\", () => {\n    setYearVisibility([\"y2023\"]);\n  });\n\n  d3.select(\"#step-nine\").on(\"stepin\", () => {\n    setYearVisibility([\"y2024\"]);\n  });\n\n  // Scrollama setup\n  const scroller = scrollama();\n\n  scroller\n    .setup({\n      step: \"#scrolly .scrolly-overlay .step\",\n      offset: 0.5,\n      debug: false,\n    })\n    .onStepEnter(function ({ element, index, direction }) {\n      const event = new CustomEvent(\"stepin\", {\n        detail: { direction: direction },\n      });\n      element.dispatchEvent(event);\n    })\n    .onStepExit(function ({ element, index, direction }) {\n      const event = new CustomEvent(\"stepout\", {\n        detail: { direction: direction },\n      });\n      element.dispatchEvent(event);\n    });\n\n  window.addEventListener(\"resize\", scroller.resize);\n});\n"]}